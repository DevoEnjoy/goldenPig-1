<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "https://mybatis.org/dtd/mybatis-3-mapper.dtd">

				<!-- 클래스 이름  -->
<mapper namespace="mypage">

	<!-- id => 메소드 이름이 -->
	<!-- 회원 정보 조회 -->
	<select id="select" parameterType="long" resultType="memberVO">
		select member_email, member_password, member_name, member_nickname, member_phonenumber, member_birth,  member_id
		from tbl_member where member_id = #{memberId}
	</select>
	
	<!--  마이페이지 사이드 조회  -->
	<select id="selectSide" parameterType="Long" resultType="mypageDTO">
		SELECT member_id, member_nickname, member_img_name, member_img_path, member_greeting, saving_write_count, answer_write_count, board_id, saving_like_count, answer_like_count, favorite_total
		FROM view_mypage_asdie_total where member_id = #{memberId};
	</select> 
	
	
	<!-- 저축 조회  -->
	<select id="selectMoney" parameterType="Long" resultType="moneyVO">
		select money_amount, money_target, money_register_date, money_expiry_date
		from tbl_money where member_id = #{memberId}
	</select>
	
	<!-- 모달 프로필 조회 -->
	<select id="selectModalProfile" parameterType="Long" resultType="moneyDTO">
		SELECT member_nickname, member_img_name, member_img_path, member_greeting, money_amount, money_target, money_register_date, money_expiry_date
		FROM view_profile_modal where member_id =#{memberId)}
	</select>	
		
	<!-- 모달 프로필 멤버 정보 수정  -->
	<update id="updateModalProfile" parameterType="MemberVO">
		UPDATE tbl_member
		SET member_email=#{memberEmail}, member_password=#{memberPassword}, member_name=#{memberName}, member_nickname=#{memberNickName}, member_birth=#{memberBirth}, member_img_name=#{memberImgName}, member_img_path=#{memberImgPath}, member_greeting=#{memberGreeting}
		WHERE member_id=#{memberId}
	</update>
	
	<!-- 모달 프로필 저축 목표 수정 -->	
	<update id="updateModalMoney" parameterType="MoneyVO">
		UPDATE tbl_money
		SET money_amount=#{moneyAmount}, money_target=#{moneyTarget}, money_register_date=#{moneyRegisterDate}, money_expiry_date=#{moneyExpiryDate}
		WHERE member_id=#{memberId};
	</update>
	
	
	
	
	
</mapper>

