<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="admin">
	<select id="getTotalMember" resultType="long">
		SELECT count(member_id)
		FROM tbl_member
	</select>
	
	<select id="selectAll" resultType="memberVO">
		SELECT member_id, member_email, member_password, member_name, member_nickname, member_phonenumber, member_birth, member_status
		FROM tbl_member;
	</select>
	
	<!-- 관리자 저축게시판 전체 조회 -->
	<select id="adminBoardSelectAll" parameterType="map" resultType="adminBoardDTO">
		select board_id, m.member_id, member_name, board_title, board_content, board_register_date, board_update_date, board_read_count
		from tbl_board_saving s join tbl_member m
		on s.member_id = m.member_id
		limit #{startRow}, #{rowCount}
	</select>
	
	<!-- 관리자 저축게시판 게시물 조회  -->
	<select id="adminBoardSelect" parameterType="long" resultType="adminBoardDTO">
		select board_id, m.member_id, member_name, board_title, board_content, board_register_date, board_update_date, board_read_count
		from tbl_board_saving s join tbl_member m
		on s.member_id = m.member_id and board_id = #{boardId}
	</select>
		
	<!-- 관리자 자유게시판 전체 조회 -->
	<select id="adminFreeSelectAll" parameterType="map" resultType="adminBoardDTO">
		select board_id, m.member_id, member_name, board_title, board_content, board_register_date, board_update_date, board_read_count
		from tbl_board_free f join tbl_member m
		on f.member_id = m.member_id
		limit #{startRow}, #{rowCount}
	</select>
	
	<!-- 관리자 자유게시판 조회 -->
	<select id="adminFreeSelect" parameterType="long" resultType="adminBoardDTO">
		select board_id, m.member_id, member_name, board_title, board_content, board_register_date, board_update_date, board_read_count
		from tbl_board_free f join tbl_member m
		on f.member_id = m.member_id and board_id = #{boardId}
	</select>
	
	<!-- 관리자 저축게시판 삭제 -->
	<delete id="adminBoardDelete" parameterType="long">
		delete from tbl_board_saving
		where board_id = #{boardId}
	</delete>
	
	<!-- 관리자 자유게시판 삭제 -->
	<delete id="adminFreeBoardDelete" parameterType="long">
		delete from tbl_board_free
		where board_id = #{boardId}
	</delete>
	
		<!-- 회원 정보 수정  -->
	<select id="memberInfoChange" parameterType="long" resultType="string">
		update member_email, member_phonenumber, member_birth from tbl_member
	</select>
	
</mapper>